!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/platform"),require("@angular/core"),require("ng-zorro-antd/core"),require("@angular/common"),require("ng-zorro-antd/icon")):"function"==typeof define&&define.amd?define("ng-zorro-antd/avatar",["exports","@angular/cdk/platform","@angular/core","ng-zorro-antd/core","@angular/common","ng-zorro-antd/icon"],e):e(((t=t||self)["ng-zorro-antd"]=t["ng-zorro-antd"]||{},t["ng-zorro-antd"].avatar={}),t.ng.cdk.platform,t.ng.core,t["ng-zorro-antd"].core,t.ng.common,t["ng-zorro-antd"].icon)}(this,function(t,e,n,s,i,r){"use strict";var o=function(){function t(t,e,n,s,i){this.elementRef=t,this.cd=e,this.updateHostClassService=n,this.renderer=s,this.platform=i,this.nzShape="circle",this.nzSize="default",this.oldAPIIcon=!0,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.el=this.elementRef.nativeElement,this.prefixCls="ant-avatar",this.sizeMap={large:"lg",small:"sm"}}return t.prototype.setClass=function(){var t,e=((t={})[this.prefixCls]=!0,t[this.prefixCls+"-"+this.sizeMap[this.nzSize]]=this.sizeMap[this.nzSize],t[this.prefixCls+"-"+this.nzShape]=this.nzShape,t[this.prefixCls+"-icon"]=this.nzIcon,t[this.prefixCls+"-image"]=this.hasSrc,t);return this.updateHostClassService.updateHostClass(this.el,e),this.cd.detectChanges(),this},t.prototype.imgError=function(){this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.setClass().notifyCalc(),this.setSizeStyle()},t.prototype.ngOnChanges=function(t){t.hasOwnProperty("nzIcon")&&t.nzIcon.currentValue&&(this.oldAPIIcon=t.nzIcon.currentValue.indexOf("anticon")>-1),this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setClass().notifyCalc(),this.setSizeStyle()},t.prototype.calcStringSize=function(){if(this.hasText){var t=this.textEl.nativeElement.offsetWidth,e=this.el.getBoundingClientRect().width,n=e-8<t?(e-8)/t:1;this.textStyles={transform:"scale("+n+") translateX(-50%)"},"number"==typeof this.nzSize&&Object.assign(this.textStyles,{lineHeight:this.nzSize+"px"}),this.cd.detectChanges()}},t.prototype.notifyCalc=function(){var t=this;return this.platform.isBrowser&&setTimeout(function(){t.calcStringSize()}),this},t.prototype.setSizeStyle=function(){var t="string"==typeof this.nzSize?this.nzSize:this.nzSize+"px";this.renderer.setStyle(this.el,"width",t),this.renderer.setStyle(this.el,"height",t),this.renderer.setStyle(this.el,"line-height",t),this.hasIcon&&this.renderer.setStyle(this.el,"font-size","calc("+t+" / 2)")},t.decorators=[{type:n.Component,args:[{selector:"nz-avatar",exportAs:"nzAvatar",template:'<i nz-icon *ngIf="nzIcon && hasIcon" [type]="!oldAPIIcon && nzIcon" [ngClass]="oldAPIIcon && nzIcon"></i>\n<img *ngIf="nzSrc && hasSrc" [src]="nzSrc" [attr.srcset]="nzSrcSet" [attr.alt]="nzAlt" (error)="imgError()"/>\n<span class="ant-avatar-string" #textEl [ngStyle]="textStyles" *ngIf="nzText && hasText">{{ nzText }}</span>',providers:[s.NzUpdateHostClassService],preserveWhitespaces:!1,changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:s.NzUpdateHostClassService},{type:n.Renderer2},{type:e.Platform}]},t.propDecorators={nzShape:[{type:n.Input}],nzSize:[{type:n.Input}],nzText:[{type:n.Input}],nzSrc:[{type:n.Input}],nzSrcSet:[{type:n.Input}],nzAlt:[{type:n.Input}],nzIcon:[{type:n.Input}],textEl:[{type:n.ViewChild,args:["textEl",{"static":!1}]}]},t}(),a=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[o],exports:[o],imports:[i.CommonModule,r.NzIconModule]}]}],t}();t.NzAvatarComponent=o,t.NzAvatarModule=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-zorro-antd-avatar.umd.min.js.map